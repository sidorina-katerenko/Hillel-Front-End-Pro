"use strict";function _createForOfIteratorHelper(r,e){var t;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,i=!1;return{s:function(){t=r[Symbol.iterator]()},n:function(){var r=t.next();return u=r.done,r},e:function(r){i=!0,o=r},f:function(){try{u||null==t.return||t.return()}finally{if(i)throw o}}}}function _unsupportedIterableToArray(r,e){if(r){if("string"==typeof r)return _arrayLikeToArray(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,e):void 0}}function _arrayLikeToArray(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}var wrapper=document.getElementById("wrapper"),USER_DATA_KEY="userData",users=getUsersFromLocalStorage(),patternName=/^[A-Z][a-z]{1,} [A-Z][a-z]{1,}$/,patternAge=/^\d{1,2}$/,patternPhone=/^\+380\d{9}$/,patternCard=/\d{4}-\d{4}-\d{4}-\d{4}/,addUserButtonContainer=createContainer("new-user-button-container"),addUserButton=createButton("button-new-user","Add new user");addUserButtonContainer.appendChild(addUserButton),wrapper.appendChild(addUserButtonContainer);var _step,_iterator=_createForOfIteratorHelper(users);try{for(_iterator.s();!(_step=_iterator.n()).done;){var user=_step.value;showUser(user)}}catch(r){_iterator.e(r)}finally{_iterator.f()}addUserButton.addEventListener("click",function(){var r,e=addUserButtonContainer.querySelector(".edit-container");null===e?(r=createUserInput(),addUserButtonContainer.appendChild(r)):e.remove()});
"use strict";var initialUsers=[{id:1,name:"John Doe",age:"18",gender:"male",phone:"+380503456789",card:"1111-2222-3333-4444"},{id:2,name:"Mary Jane",age:"13",gender:"female",phone:"+380501234567",card:"2222-3333-4444-5555"},{id:3,name:"Peter Parker",age:"30",gender:"male",phone:"+380509876543",card:"3333-4444-1111-2222"},{id:4,name:"Sarah Jessica Parker",age:"55",gender:"female",phone:"+380639876543",card:"4444-1111-2222-3333"},{id:5,name:"Stas Davydov",age:"33",gender:"male",phone:"+380679876543",card:"1111-4444-2222-3333"}];
"use strict";function createButton(e,t){var a=document.createElement("button");return a.setAttribute("type","button"),a.className=e,a.innerText=t,a}function createContainer(e){var t=document.createElement("div");return t.className=e,t}function showUserInfo(e){var t=createContainer("info-container"),a=document.createElement("div");a.innerText="Name: "+e.name;var n=document.createElement("div");n.innerText="Age: "+e.age;var r=document.createElement("div");r.innerText="Gender: "+e.gender;var d=document.createElement("div");d.innerText="Phone: "+e.phone;var o=document.createElement("div");return o.innerText="Card: "+e.card,t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(d),t.appendChild(o),t}function onUserView(e){var t=e.target.parentElement.parentElement;switch(e.target.dataset.openstate){case"closed":var a=parseInt(e.target.dataset.id),n=showUserInfo(users.find(function(e){return e.id===a}));t.appendChild(n),e.target.dataset.openstate="open";break;case"open":t.querySelector(".info-container").remove(),e.target.dataset.openstate="closed"}}function updateUserInfo(e,t,a){a.name=t.username.value,a.age=t.userage.value,a.gender=t.usergender.value,a.phone=t.userphone.value,a.card=t.usercard.value,updateLocalStorage(),e.querySelector("span").innerText=a.name,t.remove(),e.querySelector(".button-edit").dataset.openstate="closed"}function createUserInfo(e){var t={id:Date.now(),name:e.username.value,age:e.userage.value,gender:e.usergender.value,phone:e.userphone.value,card:e.usercard.value};users.push(t),updateLocalStorage(),showUser(t),e.remove()}function createUserInput(e,t){var a=document.createElement("form");a.className="edit-container";var n=document.createElement("div");n.className="error-message";var r=document.createElement("input");r.setAttribute("name","username"),r.setAttribute("placeholder","New name"),void 0!==t&&void 0!==t.name&&r.setAttribute("value",t.name);var d=document.createElement("input");d.setAttribute("name","userage"),d.setAttribute("placeholder","New age"),void 0!==t&&void 0!==t.age&&d.setAttribute("value",t.age);var o=document.createElement("input");o.setAttribute("name","usergender"),o.setAttribute("placeholder","New gender"),void 0!==t&&void 0!==t.gender&&o.setAttribute("value",t.gender);var i=document.createElement("input");i.setAttribute("name","userphone"),i.setAttribute("placeholder","New phone"),void 0!==t&&void 0!==t.phone&&i.setAttribute("value",t.phone);var s=document.createElement("input");s.setAttribute("name","usercard"),s.setAttribute("placeholder","New card"),void 0!==t&&void 0!==t.card&&s.setAttribute("value",t.card);var u=createButton("button-save","Save");return u.addEventListener("click",function(){return patternName.test(r.value)?patternAge.test(d.value)?"male"!==o.value&&"female"!==o.value?(n.innerText='Gender should be "male" or "female"',void a.appendChild(n)):patternPhone.test(i.value)?patternCard.test(s.value)?void(void 0!==t&&void 0!==t.id?updateUserInfo(e,a,t):createUserInfo(a)):(n.innerText="Please enter a valid card number (format: XXXX-XXXX-XXXX-XXXX)",void a.appendChild(n)):(n.innerText="Please enter a valid Ukrainian number",void a.appendChild(n)):(n.innerText="Please enter your age correctly",void a.appendChild(n)):(n.innerText="Please enter your name (format: Aaaaa Bbbbb)",void a.appendChild(n))}),a.appendChild(r),a.appendChild(d),a.appendChild(o),a.appendChild(i),a.appendChild(s),a.appendChild(u),a}function onUserEdit(e){var t=e.target.parentElement.parentElement;switch(e.target.dataset.openstate){case"closed":var a=parseInt(e.target.dataset.id),n=createUserInput(t,users.find(function(e){return e.id===a}));t.appendChild(n),e.target.dataset.openstate="open";break;case"open":t.querySelector(".edit-container").remove(),e.target.dataset.openstate="closed"}}function removeItem(t,a){var e=createContainer("remove-container");e.innerText="Are you sure you want to remove "+a.name+"? ";var n=createButton("button-yes","Yes"),r=createButton("button-no","No");return n.addEventListener("click",function(){var e=users.findIndex(function(e){return e.id===a.id});users.splice(e,1),updateLocalStorage(),t.remove()}),r.addEventListener("click",function(){t.querySelector(".button-remove").dataset.openstate="closed",e.remove()}),e.appendChild(n),e.appendChild(r),e}function onUserRemove(e){var t=e.target.parentElement.parentElement;switch(e.target.dataset.openstate){case"closed":var a=parseInt(e.target.dataset.id),n=removeItem(t,users.find(function(e){return e.id===a}));t.appendChild(n),e.target.dataset.openstate="open";break;case"open":t.querySelector(".remove-container").remove(),e.target.dataset.openstate="closed"}}function showUser(e){var t=createContainer("user-container");t.setAttribute("data-id",e.id);var a=document.createElement("span");a.innerText=e.name;var n=createContainer("button-container"),r=createButton("button-view","View");r.setAttribute("data-id",e.id),r.setAttribute("data-openState","closed"),r.addEventListener("click",onUserView);var d=createButton("button-edit","Edit");d.setAttribute("data-id",e.id),d.setAttribute("data-openState","closed"),d.addEventListener("click",onUserEdit);var o=createButton("button-remove","Remove");o.setAttribute("data-id",e.id),o.setAttribute("data-openState","closed"),o.addEventListener("click",onUserRemove),n.appendChild(r),n.appendChild(d),n.appendChild(o),t.appendChild(a),t.appendChild(n),wrapper.appendChild(t)}function getUsersFromLocalStorage(){var e=localStorage.getItem(USER_DATA_KEY);return null===e?(localStorage.setItem(USER_DATA_KEY,JSON.stringify(initialUsers)),initialUsers):JSON.parse(e)}function updateLocalStorage(){localStorage.setItem(USER_DATA_KEY,JSON.stringify(users))}